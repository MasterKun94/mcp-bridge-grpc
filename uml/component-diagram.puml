@startuml
!theme plain
skinparam componentStyle rectangle
skinparam packageStyle rectangle

title gRPC MCP Bridge Component Diagram

' Define components
[LLM] as LLM
[MCP Client] as McpClient
[gRPC Server] as GrpcServer1
[gRPC Server] as GrpcServer2

' Define MCP Bridge with internal components
package "MCP Bridge" as McpBridge {
  [gRPC Channel] as GrpcChannel
  [BridgeToolCallback] as ToolCallback

  ' Internal relationships
  ToolCallback --> GrpcChannel : "communicates via"
}

' Define external relationships
LLM <--> McpClient : "Natural Language\nInteraction"
McpClient <--> ToolCallback : "MCP Protocol"
GrpcChannel <--> GrpcServer1 : "gRPC Protocol"
GrpcChannel <--> GrpcServer2

' Add notes
note top of LLM
  Large Language Model
  Processes natural language
  and decides which tools to call
end note

note top of McpClient
  Client application that
  interfaces with the LLM
end note

note top of GrpcServer1
  Provides business logic
  through gRPC services
end note

note right of ToolCallback
  Handles gRPC method calls
  based on tool inputs
end note
note right of GrpcChannel
  Manages communication
  with gRPC Server
end note

' Add flow description
note bottom
  Data Flow:
  1. User sends request to MCP Client
  2. MCP Client forwards to LLM
  3. LLM decides to call a tool via MCP Bridge
  4. MCP Bridge converts request to gRPC format
  5. gRPC Server processes request and returns result
  6. Result flows back through the same path to user
end note

@enduml
